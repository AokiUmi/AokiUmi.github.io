<!DOCTYPE HTML>
<html>

<head>
	<link rel="bookmark"  type="image/x-icon"  href="img/love.jpg"/>
	<link rel="shortcut icon" href="img/love.jpg">
	
			    <title>
    Aoki_Umi
    </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/css/mic_main.css" />
    <link rel="stylesheet" href="/css/dropdownMenu.css" />
 <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <span id="busuanzi_container_site_pv">��վ�ܷ�����<span id="busuanzi_value_site_pv"></span>��</span>
    <meta name="keywords" content="Aoki_Umi" />
    
    	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	 
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css" />
    </noscript>
    <style type="text/css">
        body:before {
          content: ' ';
          position: fixed;
          top: 0;
          background: url('/img/bg.jpg') center 0 no-repeat;
          right: 0;
          bottom: 0;
          left: 0;
          background-size: cover; 
        }
    </style>

			    
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script async type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script>
	
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
<link rel="alternate" href="atom.xml" title="Aoki_Umi" type="application/atom+xml">
</head>
    
		
<!-- Layouts -->



<!--  代码渲染  -->
<script>hljs.initHighlightingOnLoad();</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/go.min.js"></script>
<link rel="stylesheet" href="/css/prism_coy.css" />
<link rel="stylesheet" href="/css/typo.css" />
<!-- 文章页 -->
<body class="is-loading">
    <!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">AOKI_UMI</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special" >
            <ul class="menu links" >
			<!-- Homepage  主页  --> 
			<li >
	            <a href="/" rel="nofollow">HOME</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">CATEGORIES</a>
	                    <ul class="submenu">
	                        <li>
	                        <a class="category-link" href="../categories/CS/">CS</a></li><li><a class="category-link" href="../categories/CS/ALGORITHM/">ALGORITHM</a></li><li><a class="category-link" href="../categories/CS/ASSEMBLY-LANGUAGE/">ASSEMBLY_LANGUAGE</a></li><li><a class="category-link" href="../categories/CS/C-C/">C&C++</a></li><li><a class="category-link" href="../categories/CS/PYTHON/">PYTHON</a></li><li><a class="category-link" href="../categories/CS/SIGNAL-PROCESSING/">SIGNAL_PROCESSING</a></li><li><a class="category-link" href="../categories/OI/">OI</a></li><li><a class="category-link" href="../categories/OI/ALGORITHM/">ALGORITHM</a></li><li><a class="category-link" href="../categories/OI/Algorithm/">Algorithm</a></li><li><a class="category-link" href="../categories/OI/Algorithm/Tree/">Tree</a></li><li><a class="category-link" href="../categories/OI/Character-String/">Character String</a></li><li><a class="category-link" href="../categories/OI/Congratulation/">Congratulation</a></li><li><a class="category-link" href="../categories/OI/Contest/">Contest</a></li><li><a class="category-link" href="../categories/OI/DATA-STRUCTURE/">DATA STRUCTURE</a></li><li><a class="category-link" href="../categories/OI/DP/">DP</a></li><li><a class="category-link" href="../categories/OI/GRAPH-THERY/">GRAPH THERY</a></li><li><a class="category-link" href="../categories/OI/Graph-Theory/">Graph Theory</a></li><li><a class="category-link" href="../categories/OI/Maths/">Maths</a></li><li><a class="category-link" href="../categories/OI/Search/">Search</a></li><li><a class="category-link" href="../categories/OI/Simulation/">Simulation</a></li><li><a class="category-link" href="../categories/STUDY/">STUDY</a>
	                    </ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        <li class="active">
	            <a href="#s1">ARCHIVES</a>
	                    <ul class="submenu">
	                        <li>
	                        <a class="archive-link" href="../archives/2022/06/">June 2022</a></li><li><a class="archive-link" href="../archives/2022/01/">January 2022</a></li><li><a class="archive-link" href="../archives/2021/11/">November 2021</a></li><li><a class="archive-link" href="../archives/2021/04/">April 2021</a></li><li><a class="archive-link" href="../archives/2021/01/">January 2021</a></li><li><a class="archive-link" href="../archives/2020/11/">November 2020</a></li><li><a class="archive-link" href="../archives/2020/10/">October 2020</a></li><li><a class="archive-link" href="../archives/2020/08/">August 2020</a></li><li><a class="archive-link" href="../archives/2020/06/">June 2020</a></li><li><a class="archive-link" href="../archives/2020/05/">May 2020</a></li><li><a class="archive-link" href="../archives/2020/04/">April 2020</a></li><li><a class="archive-link" href="../archives/2020/02/">February 2020</a></li><li><a class="archive-link" href="../archives/2018/11/">November 2018</a></li><li><a class="archive-link" href="../archives/2018/10/">October 2018</a></li><li><a class="archive-link" href="../archives/2018/09/">September 2018</a></li><li><a class="archive-link" href="../archives/2018/08/">August 2018</a></li><li><a class="archive-link" href="../archives/2018/07/">July 2018</a></li><li><a class="archive-link" href="../archives/2018/05/">May 2018</a></li><li><a class="archive-link" href="../archives/2018/04/">April 2018</a></li><li><a class="archive-link" href="../archives/2018/03/">March 2018</a></li><li><a class="archive-link" href="../archives/2018/01/">January 2018</a></li><li><a class="archive-link" href="../archives/1924/07/">July 1924</a>
	                    </ul>
	        </li>
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/about/" title="ABOUT">
		                ABOUT
		            </a>
		        </li>
		        
		        <li>
		            <a href="/group/" title="FRIENDS">
		                FRIENDS
		            </a>
		        </li>
		        
		        <li>
		            <a href="/gallery/" title="GALLERY">
		                GALLERY
		            </a>
		        </li>
		        
		        <li>
		            <a href="/tag/" title="TAG">
		                TAG
		            </a>
		        </li>
		        


            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
                    
                    <li>
                        <a title="github" href="https://github.com/AokiUmi" target="_blank" rel="noopener">
                            <i class="icon fa fa-github"></i>
                        </a>
                    </li>
                    
                    <li>
                        <a title="500px" href="http://500px.com" target="_blank" rel="noopener">
                            <i class="icon fa fa-500px"></i>
                        </a>
                    </li>
                    
			</ul>
</nav>

        <div id="main" >
            <div class ="post_page_title_img" style="height: 25rem;background-image: url();background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;" >
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;"><h2 ></h2></a>
         
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">

                <pre><code>title: CA期末总结
date: 2022/06/12 18:21:04
categories: 
- CS
- CA
tags: 
- CA
- 计算机体系结构
thumbnail: /images/0034.jpg
</code></pre><p>总结一下每张ppt有什么内容</p>
<h1 id="Lecture1-Introduction"><a href="#Lecture1-Introduction" class="headerlink" title="Lecture1: Introduction"></a>Lecture1: Introduction</h1><p>• Thinking about Machine Structures</p>
<p>• Great Ideas in Computer Architecture</p>
<p>• What you need to know about this class</p>
<p>• Everything is a Number</p>
<h1 id="Lecture-2-Introduction-to-C-I"><a href="#Lecture-2-Introduction-to-C-I" class="headerlink" title="Lecture 2: Introduction to C I"></a>Lecture 2: Introduction to C I</h1><p>• Compile vs. Interpret</p>
<ul>
<li><p>不同进制数字表示法</p>
</li>
<li><p>二进制的表示方法：1.Unsigned Integers 2.Two’s-Complement 二补数（取反+1）3. One’s-Complement 一补数（直接取反）</p>
</li>
<li><p>CPP Macro 宏定义 <code>#define MAG(x, y) (sqrt( (x)*(x) + (y)*(y)))</code> 要加很多括号不然就会有问题</p>
</li>
</ul>
<h1 id="Lecture-3-Introduction-to-C-II"><a href="#Lecture-3-Introduction-to-C-II" class="headerlink" title="Lecture 3: Introduction to C II"></a>Lecture 3: Introduction to C II</h1><p>• Pointers</p>
<p>• Pointers &amp; Arrays</p>
<p>• C Memory Management</p>
<p>• C Bugs</p>
<p> 指针的分类</p>
<ul>
<li>空指针 指针的值为NULL或0的指针</li>
<li>空悬指针  指向的空间已被释放</li>
<li>野指针  指针未被初始化(赋值)</li>
</ul>
<p>· C内存管理</p>
<p>静态内存、动态内存<br>静态内存分配好后，程序运行过程中一直存在不会被释放，且一旦分配好，其内存大小就固定下来不能改变，在编译和链接的阶段就会分配好。<br>动态内存是程序运行过程中，根据程序的需要分配和释放，其大小可变。</p>
<p>2 堆与栈<br>堆是程序通过调用malloc或new分配，调用free或delete释放。 栈是线性结构，堆是链表结构。</p>
<p>3 C的内存分配<br>全局变量和static修饰的静态变量都存放在静态内存区<br>函数内部定义的局部变量，存储在栈上，函数退出时，其占用内存被收回。<br>调用malloc或new得到的内存在堆上，不再需要时要显示的调用free或delete来释放，否则会造成内存泄漏</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//全局初始化区 ，static</span>
<span class="token keyword">char</span> <span class="token operator">*</span>p1<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//全局未初始化区 , static</span>
<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span> 
<span class="token keyword">int</span> b<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//stack</span>
<span class="token keyword">char</span> s<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"abc"</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//stack</span>
<span class="token keyword">char</span> <span class="token operator">*</span>p2<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//stack</span>
<span class="token keyword">char</span> <span class="token operator">*</span>p3 <span class="token operator">=</span> <span class="token string">"123456"</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//"123456\0"在常量区，静态内存，p3在栈上。 </span>
p3<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">></span><span class="token keyword">static</span> 
<span class="token keyword">static</span> <span class="token keyword">int</span> c <span class="token operator">=</span><span class="token number">0</span>； <span class="token comment" spellcheck="true">//全局（静态）初始化区 static</span>
p1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// heap</span>
p2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//heap</span>
<span class="token operator">&amp;</span>p2 <span class="token operator">-</span><span class="token operator">></span> stack 
<span class="token function">strcpy</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> <span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//"123456\0"放在常量区，编译器可能会将它与p3所指向的"123456"优化成一个地方。 </span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="Lecture-4-RISC-V-I"><a href="#Lecture-4-RISC-V-I" class="headerlink" title="Lecture 4: RISC-V I"></a>Lecture 4: RISC-V I</h1><ul>
<li>Big Endian vs. Little Endian</li>
</ul>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\2.png" alt=""></p>
<h1 id="Lecture-5-RISC-V-II-III-IV"><a href="#Lecture-5-RISC-V-II-III-IV" class="headerlink" title="Lecture 5: RISC-V II III IV"></a>Lecture 5: RISC-V II III IV</h1><p>introduce how to write risc-v 具体看绿卡就行</p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\3.png" alt=""></p>
<h1 id="Lecture-8-RISC-V-V"><a href="#Lecture-8-RISC-V-V" class="headerlink" title="Lecture 8: RISC-V V"></a>Lecture 8: RISC-V V</h1><p>浮点数表示法</p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\4.png" alt=""></p>
<h1 id="Lecture-9-SDS"><a href="#Lecture-9-SDS" class="headerlink" title="Lecture 9: SDS"></a>Lecture 9: SDS</h1><ul>
<li>CMOS</li>
</ul>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\5.png" alt=""></p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\6.png" alt=""></p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\7.png" alt=""></p>
<h2 id="逻辑电路化简公式"><a href="#逻辑电路化简公式" class="headerlink" title="逻辑电路化简公式"></a>逻辑电路化简公式</h2><p><a href="https://blog.csdn.net/qq_41361526/article/details/107770713" target="_blank" rel="noopener">数字电路 化简</a></p>
<p>并项法： AB + AB’ = A<br>两项合并为一项，消去B与B’</p>
<p>吸收法： A + AB = A<br>短项吸收长项</p>
<p>消项法： AB+ A’C + BC =AB + A’C<br>可拓展为：<br>AB+ A’C + BCD =AB + A’C</p>
<p>消因子法：A + A’B = A + B<br>短项能够消去 长项中 的 相反项<br>此处也能这样理解：A看作A*(1+B), 即A+AB+A’B</p>
<p>配项法： 基本公式 A + A = A<br>可以在逻辑函数中重复写入某一项，或如下图过程中所示，乘上(A+A’)</p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\10.png" alt=""></p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\11.png" alt=""></p>
<h1 id="Lecture-11-FSM"><a href="#Lecture-11-FSM" class="headerlink" title="Lecture 11: FSM"></a>Lecture 11: FSM</h1><p>SDS相关计算</p>
<p><img src="file:///D:/Blog/source/_posts/CA期末总结/8.png" title="" alt="" data-align="right"></p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\9.png" alt=""></p>
<p>min clk period= clk-to-q delay + max CL delay +set up time</p>
<p>longest set up time = min (clk period - input delay) (包括寄存器clk delay) 算从输入到寄存器的delay</p>
<p>longest hold time = min output delay (从输出口子到输入线的delay）</p>
<p>clk-q + best case CL delay &lt; hold time</p>
<h1 id="Lecture-12-CPU-Control-amp-Datapath"><a href="#Lecture-12-CPU-Control-amp-Datapath" class="headerlink" title="Lecture 12 : CPU Control &amp; Datapath"></a>Lecture 12 : CPU Control &amp; Datapath</h1><p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\12.png" alt=""></p>
<p>Complete Datapath</p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\13.png" alt=""></p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\14.png" alt=""></p>
<h1 id="Lecture-12-Pipelining"><a href="#Lecture-12-Pipelining" class="headerlink" title="Lecture 12: Pipelining"></a>Lecture 12: Pipelining</h1><p>• Pipelining</p>
<p>• Hazards</p>
<p>– Structural</p>
<p>– Data</p>
<p>• R-type instructions</p>
<p>• Load</p>
<p>– Control</p>
<p>Single Cycle Performance without pipeline: $t_{clk}=t_{pc-clk-q}+t_{IMEMread}+t_{RF read}+t_{mux}+t_{ALU}+t_{DMEMread}+t_{max}+t_{RFsetup}$</p>
<p>how to speed up of 5 through pipelining:</p>
<ol>
<li><p>No hazards</p>
</li>
<li><p>No pipeline register delay</p>
</li>
<li><p>All pipeline stages have equal delay</p>
</li>
</ol>
<p>5 stages pipelining</p>
<p>IF : $t_{clk-q}+t_{MEMread}+t_{Regsetup}$</p>
<p>ID：$t_{clk-q}+t_{RFread}+t_{Regsetup}$</p>
<p>EX：$t_{clk-q}+t_{mux}+t_{ALU}+t_{Regsetup}+t_{mux}$</p>
<p>MEM：$t_{Regclk-q}+t_{MEMread}+t_{mux}+t_{Regsetup}$</p>
<p>WB：$t_{Regclk-q}+t_{RFsetup}$</p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\16.png" alt=""></p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\17.png" alt=""></p>
<h3 id="Data-Hazard-solution"><a href="#Data-Hazard-solution" class="headerlink" title="Data Hazard solution"></a>Data Hazard solution</h3><ul>
<li><p>stalling</p>
</li>
<li><p>forwarding</p>
</li>
</ul>
<h3 id="Control-Hazards-solution"><a href="#Control-Hazards-solution" class="headerlink" title="Control Hazards solution"></a>Control Hazards solution</h3><ul>
<li>prediction</li>
</ul>
<h1 id="Lecture-13-Superscalar"><a href="#Lecture-13-Superscalar" class="headerlink" title="Lecture 13: Superscalar"></a>Lecture 13: Superscalar</h1><p>• Processor Performance - Overview</p>
<p>• Complex Pipelines</p>
<p>• Static Multiple Issues (VLIW)</p>
<p>• Dynamic Multiple Issues (Superscalar)</p>
<h3 id="“Iron-Law”-of-Processor"><a href="#“Iron-Law”-of-Processor" class="headerlink" title="“Iron Law” of Processor"></a>“Iron Law” of Processor</h3><p>cpi </p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\18.png" alt=""></p>
<p>Static Multiple Issue</p>
<p>• aka.: Very Long Instruction Word (VLIW)</p>
<p>• Compiler bundles instructions together</p>
<p>• Compiler takes care of hazards</p>
<p>• CPU executes at the same time</p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\19.png" alt=""></p>
<p>fetch buffer between 1 and 2</p>
<h1 id="Lecture-14-16-Caches-Part-I"><a href="#Lecture-14-16-Caches-Part-I" class="headerlink" title="Lecture 14-16: Caches Part I"></a>Lecture 14-16: Caches Part I</h1><p>Cache Lecture I</p>
<p>– Caches Introduction</p>
<p>– Principle of Locality</p>
<p>• Temporal Locality (locality in time)</p>
<p>– If a memory location is referenced, then it will</p>
<p>tend to be referenced again soon</p>
<p>• Spatial Locality (locality in space)</p>
<p>– If a memory location is referenced, the locations</p>
<p>with nearby addresses will tend to be referenced soon</p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\20.png" alt=""></p>
<p>– Simple Cache</p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\21.png" alt=""></p>
<p>– Direct Mapped &amp; Set-Associative Caches</p>
<p>• Cache Lecture II</p>
<p>– Stores to Caches</p>
<p>– Cache Performance</p>
<p>– Cache Misses</p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\22.png" alt=""></p>
<p>– Cache Configurations</p>
<p>– Cache Examples</p>
<h4 id="increase-associativity"><a href="#increase-associativity" class="headerlink" title="increase associativity"></a>increase associativity</h4><ul>
<li><p>hit time increase</p>
</li>
<li><p>miss rate decrease</p>
</li>
<li><p>miss penalty unchange</p>
</li>
</ul>
<h4 id="increase-entries"><a href="#increase-entries" class="headerlink" title="increase entries"></a>increase entries</h4><ul>
<li><p>hit time increase</p>
</li>
<li><p>miss rate decrease</p>
</li>
<li><p>miss penalty unchange</p>
</li>
</ul>
<h4 id="increase-block-size"><a href="#increase-block-size" class="headerlink" title="increase block size"></a>increase block size</h4><ul>
<li><p>hit time unchange</p>
</li>
<li><p>miss rate decrease</p>
</li>
<li><p>miss penalty increase</p>
</li>
</ul>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\23.png" alt=""></p>
<p>矩阵乘法 最快的循环时jki</p>
<h1 id="Lecture-19-DLP"><a href="#Lecture-19-DLP" class="headerlink" title="Lecture 19: DLP"></a>Lecture 19: DLP</h1><h2 id="Flynn-Taxonomy"><a href="#Flynn-Taxonomy" class="headerlink" title="Flynn* Taxonomy"></a>Flynn* Taxonomy</h2><ul>
<li><p>Single-Instruction/Single-Data Stream(SISD)</p>
</li>
<li><p>Single-Instruction/Multiple-Data Stream(SIMD or “sim-dee”)</p>
</li>
<li><p>Multiple-Instruction/Multiple-Data Streams(MIMD or “mim-dee”)</p>
</li>
<li><p>Multiple-Instruction/Single-Data Stream(MISD)</p>
</li>
</ul>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\24.png" alt=""></p>
<p>SIMD simplify in LAB</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">sum_naive</span><span class="token punctuation">(</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>a <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>
        sum <span class="token operator">+</span><span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">sum_unrolled</span><span class="token punctuation">(</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>a <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/* do the body of the work in a faster unrolled loop */</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token operator">/</span><span class="token number">4</span><span class="token operator">*</span><span class="token number">4</span><span class="token punctuation">;</span> i <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">4</span> <span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        sum <span class="token operator">+</span><span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        sum <span class="token operator">+</span><span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        sum <span class="token operator">+</span><span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        sum <span class="token operator">+</span><span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">/* handle the small tail in a usual way */</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">int</span> i <span class="token operator">=</span> n<span class="token operator">/</span><span class="token number">4</span><span class="token operator">*</span><span class="token number">4</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>   
        sum <span class="token operator">+</span><span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">sum_vectorized</span><span class="token punctuation">(</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>a <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    __m128i tp<span class="token operator">=</span><span class="token function">_mm_setzero_si128</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token operator">/</span><span class="token number">4</span><span class="token operator">*</span><span class="token number">4</span><span class="token punctuation">;</span>i<span class="token operator">+</span><span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        tp<span class="token operator">=</span><span class="token function">_mm_add_epi32</span><span class="token punctuation">(</span>tp<span class="token punctuation">,</span><span class="token function">_mm_loadu_si128</span><span class="token punctuation">(</span><span class="token punctuation">(</span>__m128i <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span> z<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>ans<span class="token punctuation">;</span>
    <span class="token function">_mm_storeu_si128</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>__m128i <span class="token operator">*</span><span class="token punctuation">)</span>z<span class="token punctuation">,</span>  tp <span class="token punctuation">)</span><span class="token punctuation">;</span>
    ans<span class="token operator">=</span>z<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span>z<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>z<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">+</span>z<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>n<span class="token operator">/</span><span class="token number">4</span><span class="token operator">*</span><span class="token number">4</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
        ans<span class="token operator">+</span><span class="token operator">=</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ans<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">sum_vectorized_unrolled</span><span class="token punctuation">(</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>a <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    __m128i tp<span class="token operator">=</span><span class="token function">_mm_setzero_si128</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token operator">/</span><span class="token number">16</span><span class="token operator">*</span><span class="token number">16</span><span class="token punctuation">;</span>i<span class="token operator">+</span><span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        tp<span class="token operator">=</span><span class="token function">_mm_add_epi32</span><span class="token punctuation">(</span>tp<span class="token punctuation">,</span><span class="token function">_mm_loadu_si128</span><span class="token punctuation">(</span><span class="token punctuation">(</span>__m128i <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tp<span class="token operator">=</span><span class="token function">_mm_add_epi32</span><span class="token punctuation">(</span>tp<span class="token punctuation">,</span><span class="token function">_mm_loadu_si128</span><span class="token punctuation">(</span><span class="token punctuation">(</span>__m128i <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token operator">+</span>i<span class="token operator">+</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tp<span class="token operator">=</span><span class="token function">_mm_add_epi32</span><span class="token punctuation">(</span>tp<span class="token punctuation">,</span><span class="token function">_mm_loadu_si128</span><span class="token punctuation">(</span><span class="token punctuation">(</span>__m128i <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token operator">+</span>i<span class="token operator">+</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tp<span class="token operator">=</span><span class="token function">_mm_add_epi32</span><span class="token punctuation">(</span>tp<span class="token punctuation">,</span><span class="token function">_mm_loadu_si128</span><span class="token punctuation">(</span><span class="token punctuation">(</span>__m128i <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token operator">+</span>i<span class="token operator">+</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span> z<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>ans<span class="token punctuation">;</span>
    <span class="token function">_mm_storeu_si128</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>__m128i <span class="token operator">*</span><span class="token punctuation">)</span>z<span class="token punctuation">,</span>  tp <span class="token punctuation">)</span><span class="token punctuation">;</span>
    ans<span class="token operator">=</span>z<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span>z<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>z<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">+</span>z<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>n<span class="token operator">/</span><span class="token number">16</span><span class="token operator">*</span><span class="token number">16</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
        ans<span class="token operator">+</span><span class="token operator">=</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>


    <span class="token keyword">return</span> ans<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="Amdahl’s-Law"><a href="#Amdahl’s-Law" class="headerlink" title="Amdahl’s Law"></a>Amdahl’s Law</h3><p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\25.png" alt=""></p>
<ul>
<li>Loop Unrolled</li>
</ul>
<p>• Amdahl’s Law: Serial sections limit speedup</p>
<p>• Flynn Taxonomy</p>
<p>• Intel SSE SIMD Instructions</p>
<p>– Exploit data-level parallelism in loops</p>
<p>– One instruction fetch that operates on multiple</p>
<p>operands simultaneously</p>
<p>– 128-bit XMM registers</p>
<p>• SSE Instructions in C</p>
<p>– Embed the SSE machine instructions directly into C</p>
<p>programs through use of intrinsics</p>
<p>– Achieve efficiency beyond that of optimizing compiler</p>
<h1 id="Lecture-20-TLP-Thread-Level-Parallelism"><a href="#Lecture-20-TLP-Thread-Level-Parallelism" class="headerlink" title="Lecture 20: TLP Thread-Level Parallelism"></a>Lecture 20: TLP Thread-Level Parallelism</h1><ul>
<li><p>Hardware Multithreading</p>
</li>
<li><p>Operating System Threads</p>
</li>
<li><p>Hyper-threading (simplified)</p>
</li>
<li><p>OpenMP</p>
</li>
</ul>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\26.png" alt=""></p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\27.png" alt=""></p>
<ul>
<li><p>OpenMP problem data race</p>
</li>
<li><p>OpenMP lock (too slow)</p>
</li>
</ul>
<p>OpenMP in lab</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token comment" spellcheck="true">// EDIT THIS FUNCTION PART 1</span>
<span class="token keyword">double</span> <span class="token function">dotp_manual_optimized</span> <span class="token punctuation">(</span><span class="token keyword">double</span> <span class="token operator">*</span>x<span class="token punctuation">,</span> <span class="token keyword">double</span> <span class="token operator">*</span>y<span class="token punctuation">,</span> <span class="token keyword">int</span> arr_size<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">double</span> global_sum <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
  <span class="token macro property">#<span class="token directive keyword">pragma</span> omp parallel</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">int</span> curr_id <span class="token operator">=</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> num_threads <span class="token operator">=</span> <span class="token function">omp_get_num_threads</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> start <span class="token operator">=</span> curr_id <span class="token operator">*</span> <span class="token punctuation">(</span>arr_size <span class="token operator">/</span> num_threads<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> end <span class="token operator">=</span> start <span class="token operator">+</span> <span class="token punctuation">(</span>arr_size <span class="token operator">/</span> num_threads<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">double</span> thread_sum <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> end<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
      thread_sum <span class="token operator">+</span><span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>curr_id <span class="token operator">==</span> num_threads <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> end <span class="token operator">&lt;</span> arr_size<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> end<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr_size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        thread_sum <span class="token operator">+</span><span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        
    <span class="token punctuation">}</span>
    <span class="token macro property">#<span class="token directive keyword">pragma</span> omp critical</span>
      global_sum <span class="token operator">+</span><span class="token operator">=</span> thread_sum<span class="token punctuation">;</span>    
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> global_sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// EDIT THIS FUNCTION PART 2</span>
<span class="token keyword">double</span> <span class="token function">dotp_reduction_optimized</span> <span class="token punctuation">(</span><span class="token keyword">double</span> <span class="token operator">*</span>x<span class="token punctuation">,</span> <span class="token keyword">double</span> <span class="token operator">*</span>y<span class="token punctuation">,</span> <span class="token keyword">int</span> arr_size<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">double</span> global_sum <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
  <span class="token macro property">#<span class="token directive keyword">pragma</span> omp parallel</span>
  <span class="token punctuation">{</span>
    <span class="token macro property">#<span class="token directive keyword">pragma</span> omp for reduction (+ : global_sum)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr_size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
      global_sum <span class="token operator">+</span><span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> global_sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> <span class="token function">v_add_for</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token operator">*</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token operator">*</span> y<span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token operator">*</span> z<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token macro property">#<span class="token directive keyword">pragma</span> omp parallel</span>
    <span class="token punctuation">{</span>
    <span class="token macro property">#<span class="token directive keyword">pragma</span> omp for</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>ARRAY_SIZE<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            z<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">v_add_optimized_adjacent</span> <span class="token punctuation">(</span><span class="token keyword">double</span> <span class="token operator">*</span>x<span class="token punctuation">,</span> <span class="token keyword">double</span> <span class="token operator">*</span>y<span class="token punctuation">,</span> <span class="token keyword">double</span> <span class="token operator">*</span>z<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token macro property">#<span class="token directive keyword">pragma</span> omp parallel</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">int</span> curr_id <span class="token operator">=</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> num_threads <span class="token operator">=</span> <span class="token function">omp_get_num_threads</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> curr_id<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ARRAY_SIZE<span class="token punctuation">;</span> i <span class="token operator">+</span><span class="token operator">=</span> num_threads<span class="token punctuation">)</span>
    z<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// Edit this function (Method 2) </span>
<span class="token keyword">void</span> <span class="token function">v_add_optimized_chunks</span> <span class="token punctuation">(</span><span class="token keyword">double</span> <span class="token operator">*</span>x<span class="token punctuation">,</span> <span class="token keyword">double</span> <span class="token operator">*</span>y<span class="token punctuation">,</span> <span class="token keyword">double</span> <span class="token operator">*</span>z<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token macro property">#<span class="token directive keyword">pragma</span> omp parallel</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">int</span> curr_id <span class="token operator">=</span> <span class="token function">omp_get_thread_num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> num_threads <span class="token operator">=</span> <span class="token function">omp_get_num_threads</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> start <span class="token operator">=</span> curr_id <span class="token operator">*</span> <span class="token punctuation">(</span>ARRAY_SIZE <span class="token operator">/</span> num_threads<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> end <span class="token operator">=</span> start <span class="token operator">+</span> <span class="token punctuation">(</span>ARRAY_SIZE <span class="token operator">/</span> num_threads<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> end<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
      z<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>curr_id <span class="token operator">==</span> num_threads <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> end <span class="token operator">&lt;</span> ARRAY_SIZE<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> end<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ARRAY_SIZE<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        z<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        
    <span class="token punctuation">}</span>    
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="Lecture-22-OS"><a href="#Lecture-22-OS" class="headerlink" title="Lecture 22: OS"></a>Lecture 22: OS</h1><p>• OS Boot Sequence and Operation</p>
<p>• Devices and I/O, interrupt and traps</p>
<p>I/O Example (polling) :mouse/processor</p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\28.png" alt=""></p>
<p>Interrupt-driven I/O:Disk</p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\29.png" alt=""></p>
<p>Traps/Interrupts/Exceptions</p>
<p>• Application, Multiprogramming/time-sharing</p>
<h1 id="Lecture-24-VM"><a href="#Lecture-24-VM" class="headerlink" title="Lecture 24: VM"></a>Lecture 24: VM</h1><ul>
<li>What do we need Virtual Memory for?</li>
</ul>
<p>Reason 1: Adding Disks to Hierarchy</p>
<p>Reason 2: Simplifying Memory for Apps</p>
<p>Reason 3: Protection Between Processes</p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\30.png" alt=""></p>
<p>Pages advantages:</p>
<ul>
<li><p>run program longer than DRAM</p>
</li>
<li><p>no memory fragamentation</p>
</li>
</ul>
<p>TLB</p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\31.png" alt=""></p>
<p>TLB check -&gt; page check -&gt; allocate new memory -&gt; update page -&gt; update TLB</p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\32.png" alt=""></p>
<p>Embedded System Design</p>
<p>– Communication devices</p>
<p>• Wired and wireless routers and switches</p>
<p>– Automotive applications</p>
<p>• Braking systems, traction control, airbag release systems,</p>
<p>and cruise-control applications</p>
<p>– Aerospace applications</p>
<p>• Flight-control systems, engine controllers, auto-pilots and</p>
<p>passenger in-flight entertainment systems</p>
<p>– Defence systems</p>
<p>• Radar systems, fighter aircraft flight-control systems, radio</p>
<p>systems, and missile guidance systems</p>
<p><img src="/2022/06/12/CA期末总结/Blog\source\_posts\CA期末总结\33.png" alt=""></p>

            </div>

            <!-- Post Comments -->
            
    <!-- 使用 valine -->
<div id="comment">
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
<script>
    new Valine({
        el: '#comment' ,
        notify: false,
        verify: false,
        app_id: 'fUtpOauFo2JhcWoBFEnnppJW-gzGzoHsz',
        app_key: 'gFTwG42ACHuyrmwhMfgxcRQQ',
        placeholder: '留下你的评论吧~~',
        pageSize: '10',
        avatar: '',
        avatar_cdn: 'https://gravatar.loli.net/avatar/'
    });
</script>
</div>
<style>
   #comment{
        padding: 2pc;
    }
</style>


        </div>
        <!-- Copyright 版权 start -->
                <div id="copyright">
            <ul>
                <li>&copy;Powered By <a href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
                <li>Design: <a href="http://miccall.tech " style="border-bottom: none;">miccall</a></li>
            </ul>
            
            	<span id="busuanzi_container_site_pv">2022总访问量<span id="busuanzi_value_site_pv"></span>次</span>
			
        </div>
    </div>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"left","width":125,"height":250},"mobile":{"show":false},"log":false});</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"left","width":125,"height":250},"mobile":{"show":false},"log":false});</script></body>




 	

    </script>
</html>
